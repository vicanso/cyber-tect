import{u as h,s as p,a as N,b as y,t as V}from"./index-aeeb7070.js";import{E as g}from"./ExLoading-572e76eb.js";import{u as v,t as U,v as w,w as n,x as i,y as d,d as x,r as z}from"./naive-094f875f.js";import{d as L,r as f,N as e,i as R}from"./ui-32540f7e.js";import"./common-a7d1cc73.js";function j(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!R(t)}const M=L({name:"ProfileView",setup(){const t=v(),l=f(!1),s=f({}),o=async()=>{l.value=!0;try{const a=await h();s.value=a}catch(a){p(t,a)}finally{l.value=!1}},r=f({name:"",email:"",alarmURL:""}),u=async()=>{if(l.value)return;const{name:a,email:c,alarmURL:m}=r.value;if(!a&&!c&&!m){N(t,"信息无修改无需要更新");return}l.value=!0;try{await y({name:a,email:c,alarmURL:m}),V(t,"已成功更新信息。")}catch(b){p(t,b)}finally{l.value=!1}};return o(),{processing:l,detail:s,form:r,update:u}},render(){const{processing:t,detail:l,form:s,update:o}=this;if(t&&!l.account)return e(g,null,null);let r="更新";t&&(r="更新中..");const u="large";return e(z,{title:"个人信息"},{default:()=>[e(U,null,{default:()=>[e(w,{xGap:24},{default:()=>[e(n,{span:12},{default:()=>[e(i,{label:"用户："},{default:()=>[e(d,{placeholder:"请输入用户名称",defaultValue:l.name,clearable:!0,size:u,onUpdateValue:a=>{s.name=a}},null)]})]}),e(n,{span:12},{default:()=>[e(i,{label:"邮箱地址："},{default:()=>[e(d,{placeholder:"请输入邮箱地址",defaultValue:l.email,clearable:!0,size:u,onUpdateValue:a=>{s.email=a}},null)]})]}),e(n,{span:24},{default:()=>[e(i,{label:"告警接收地址："},{default:()=>[e(d,{placeholder:"请输入告警接收地址，如果要清除则输入空格(未配置则发送告警信息至邮箱)",defaultValue:l.alarmURL,clearable:!0,size:u,onUpdateValue:a=>{s.alarmURL=a}},null)]})]}),e(n,{span:24},{default:()=>[e(x,{class:"widthFull",size:u,onClick:o},j(r)?r:{default:()=>[r]})]})]})]})]})}});export{M as default};
