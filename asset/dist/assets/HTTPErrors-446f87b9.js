import{E as n}from"./ExTable-dcbd254b.js";import{s,q as u}from"./index-aeeb7070.js";import{c as d,d as p,e as c,g as m,E as h,u as y}from"./ExFluxDetail-8f36b2a4.js";import{E as f}from"./ExLoading-572e76eb.js";import{F as a}from"./ExFormInterface-d830d527.js";import{d as g,f as E,E as k,N as o}from"./ui-32540f7e.js";import{u as w}from"./naive-094f875f.js";import"./common-a7d1cc73.js";function T(){return[{title:"账户",key:"account",width:100,fixed:"left"},{title:"方法",key:"method",width:80},{title:"分类",key:"category",width:120},{title:"状态码",key:"status",width:80},{title:"异常",key:"exception",width:80,render(e){return e.exception?"是":"否"}},{title:"TrackID",key:"tid",width:220},{title:"SessionID",key:"sid",width:220},{title:"IP",key:"ip",width:140},{title:"URI",key:"uri",width:200},{title:"出错信息",key:"error",width:80,ellipsis:{tooltip:!0}},{title:"完整记录",key:"httpErrorDetail",width:90,align:"center",render(e){return o(h,{measurement:m,data:e,tagKeys:["method","route","category"]},null)}},{title:"时间",key:"createdAt",width:180,fixed:"right"}]}const i=[{label:"所有",value:""}];function x(){return[{key:"account",name:"账户：",placeholder:"请输入要筛选的账号"},{key:"category",name:"分类：",placeholder:"请选择要筛选的分类",type:a.Select,options:i},{key:"exception",name:"是否异常",placeholder:"请选择是否筛选异常出错",type:a.Select,options:[{label:"所有",value:""},{label:"是",value:"true"},{label:"否",value:"false"}]},{key:"limit",name:"查询数量：",type:a.InputNumber,placeholder:"请输入要查询的记录数量"},{key:"begin:end",name:"开始结束时间：",type:a.DateRange,span:12,defaultValue:[u().toISOString(),new Date().toISOString()]}]}const v=g({name:"HTTPErrorStats",setup(){const e=w(),{httpErrorCategories:t,httpErrors:r}=y();return E(async()=>{try{await d()}catch(l){s(e,l)}}),k(()=>{p()}),{httpErrorCategories:t,httpErrors:r}},render(){const{httpErrors:e,httpErrorCategories:t}=this;return t.processing?o(f,null,null):(i.length===1&&t.items.length!==0&&t.items.forEach(r=>{i.push({label:r,value:r})}),o(n,{disableAutoFetch:!0,hidePagination:!0,title:"HTTP响应出错",filters:x(),columns:T(),data:e,fetch:c},null))}});export{v as default};
