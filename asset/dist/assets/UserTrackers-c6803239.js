import{f as u,a as c,b as p,m,E as f,u as d}from"./ExFluxDetail-8f36b2a4.js";import{F as a}from"./ExFormInterface-d830d527.js";import{E as y}from"./ExLoading-572e76eb.js";import{E as h}from"./ExTable-dcbd254b.js";import{s as k,v as i,q as g}from"./index-aeeb7070.js";import{u as x,B as T}from"./naive-094f875f.js";import{d as b,f as w,E as S,N as r,c as l,i as E}from"./ui-32540f7e.js";import"./common-a7d1cc73.js";function v(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!E(e)}function D(){return[{title:"账户",key:"account",width:100},{type:"expand",expandable:e=>!!e.form||!!e.query||!!e.params,renderExpand:e=>{const t=[];return e.form&&t.push(r("pre",null,[l("form: "),i(e.form)])),e.query&&t.push(r("pre",null,[l("query: "),i(e.query)])),e.params&&t.push(r("pre",null,[l("params: "),i(e.params)])),r("div",null,[t])}},{title:"类别",key:"action",width:160},{title:"结果",key:"resultDesc",width:80},{title:"TrackID",key:"tid",width:120,ellipsis:!0},{title:"SessionID",key:"sid",width:120,ellipsis:!0},{title:"IP",key:"ip",width:100,ellipsis:{tooltip:!0}},{title:"出错信息",key:"error",render:e=>{const t=e.error;return t?r(T,{tooltip:{width:250}},v(t)?t:{default:()=>[t]}):void 0}},{title:"完整记录",key:"userTrackerDetail",width:90,align:"center",render(e){return r(f,{measurement:m,data:e,tagKeys:["action","result","step"]},null)}},{title:"时间",key:"createdAt",width:180,fixed:"right"}]}const n=[{label:"所有",value:""}];function I(){return[{key:"account",name:"账户：",placeholder:"请输入要筛选的账号"},{key:"action",name:"类别：",placeholder:"请选择要筛选的类别",type:a.Select,options:n},{key:"result",name:"结果：",type:a.Select,placeholder:"请选择要筛选的结果",options:[{label:"所有",value:""},{label:"成功",value:"0"},{label:"失败",value:"1"}]},{key:"limit",name:"查询数量",type:a.InputNumber,placeholder:"请输入要查询的记录数量"},{key:"begin:end",name:"开始结束时间：",type:a.DateRange,span:12,defaultValue:[g().toISOString(),new Date().toISOString()]}]}const j=b({name:"UserTrackerStats",setup(){const e=x(),{userTrackers:t,userTrackerActions:s}=d();return w(async()=>{try{await u()}catch(o){k(e,o)}}),S(()=>{c()}),{userTrackers:t,userTrackerActions:s}},render(){const{userTrackers:e,userTrackerActions:t}=this;return t.processing?r(y,null,null):(n.length===1&&t.items.length!==0&&t.items.forEach(s=>n.push({label:s,value:s})),r(h,{disableAutoFetch:!0,hidePagination:!0,filters:I(),title:"用户行为查询",columns:D(),data:e,fetch:p},null))}});export{j as default};
