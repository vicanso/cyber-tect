import{H as p,x as h,a as d,s as f,t as v}from"./index-aeeb7070.js";import{d as m,r as u,N as s,c}from"./ui-32540f7e.js";import{u as C,v as N,w as n,y as w,d as y,r as k}from"./naive-094f875f.js";import"./common-a7d1cc73.js";async function g(e){const a=p.replace(":key",e),{data:t}=await h.get(a);return t}async function F(e){const a=p.replace(":key",e);await h.delete(a)}const z=m({name:"CachesView",setup(){const e=C(),a=u(""),t=u(!1),l=u("");return{processing:t,key:a,fetch:async()=>{if(!a.value){d(e,"请输入要查询的key");return}if(!t.value){t.value=!0;try{l.value="";const r=await g(a.value);try{const i=JSON.parse(r.data);l.value=JSON.stringify(i,null,2)}catch{l.value=r.data}}catch(r){f(e,r)}finally{t.value=!1}}},del:async()=>{if(!a.value){d(e,"请输入要删除的key");return}if(!t.value)try{l.value="",await F(a.value),v(e,"已成功清除数据")}catch(r){f(e,r)}finally{t.value=!1}},cacheData:l}},render(){const e="large",{fetch:a,cacheData:t,del:l}=this;return s(k,{title:"缓存查询与清除"},{default:()=>[s("p",null,[c("session的缓存格式 ss:sessionID")]),s(N,{xGap:24},{default:()=>[s(n,{span:12},{default:()=>[s(w,{placeholder:"请输入缓存的key",size:e,clearable:!0,onUpdateValue:o=>{this.key=o}},null)]}),s(n,{span:6},{default:()=>[s(y,{class:"widthFull",size:e,onClick:()=>a()},{default:()=>[c("查询")]})]}),s(n,{span:6},{default:()=>[s(y,{class:"widthFull",size:e,onClick:()=>l()},{default:()=>[c("清除")]})]}),t&&s(n,{span:24},{default:()=>[s("pre",null,[t])]})]})]})}});export{z as default};
