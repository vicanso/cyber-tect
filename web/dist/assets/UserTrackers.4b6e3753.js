import{u,f as c,a as p,E as m,m as d,b as f}from"./ExFluxDetail.3e2edce5.js";import{F as s}from"./ExFormInterface.d1e14f35.js";import{E as y}from"./ExLoading.befd655b.js";import{E as h}from"./ExTable.6634af00.js";import{s as k,K as x,Q as i}from"./index.1e068ea3.js";import{u as b,K as g}from"./naive.650dd42a.js";import{h as T,b as E,z as w,G as r,f as l,J as S}from"./ui.c327b114.js";import"./common.c9fa31ee.js";function j(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!S(e)}function v(){return[{title:"\u8D26\u6237",key:"account",width:100},{type:"expand",expandable:e=>!!e.form||!!e.query||!!e.params,renderExpand:e=>{const t=[];return e.form&&t.push(r("pre",null,[l("form: "),i(e.form)])),e.query&&t.push(r("pre",null,[l("query: "),i(e.query)])),e.params&&t.push(r("pre",null,[l("params: "),i(e.params)])),r("div",null,[t])}},{title:"\u7C7B\u522B",key:"action",width:160},{title:"\u7ED3\u679C",key:"resultDesc",width:80},{title:"TrackID",key:"tid",width:120,ellipsis:!0},{title:"SessionID",key:"sid",width:120,ellipsis:!0},{title:"IP",key:"ip",width:100,ellipsis:{tooltip:!0}},{title:"\u51FA\u9519\u4FE1\u606F",key:"error",render:e=>{const t=e.error;return t?r(g,{tooltip:{width:250}},j(t)?t:{default:()=>[t]}):void 0}},{title:"\u5B8C\u6574\u8BB0\u5F55",key:"userTrackerDetail",width:90,align:"center",render(e){return r(m,{measurement:d,data:e,tagKeys:["action","result","step"]},null)}},{title:"\u65F6\u95F4",key:"createdAt",width:180,fixed:"right"}]}const n=[{label:"\u6240\u6709",value:""}];function D(){return[{key:"account",name:"\u8D26\u6237\uFF1A",placeholder:"\u8BF7\u8F93\u5165\u8981\u7B5B\u9009\u7684\u8D26\u53F7"},{key:"action",name:"\u7C7B\u522B\uFF1A",placeholder:"\u8BF7\u9009\u62E9\u8981\u7B5B\u9009\u7684\u7C7B\u522B",type:s.Select,options:n},{key:"result",name:"\u7ED3\u679C\uFF1A",type:s.Select,placeholder:"\u8BF7\u9009\u62E9\u8981\u7B5B\u9009\u7684\u7ED3\u679C",options:[{label:"\u6240\u6709",value:""},{label:"\u6210\u529F",value:"0"},{label:"\u5931\u8D25",value:"1"}]},{key:"limit",name:"\u67E5\u8BE2\u6570\u91CF",type:s.InputNumber,placeholder:"\u8BF7\u8F93\u5165\u8981\u67E5\u8BE2\u7684\u8BB0\u5F55\u6570\u91CF"},{key:"begin:end",name:"\u5F00\u59CB\u7ED3\u675F\u65F6\u95F4\uFF1A",type:s.DateRange,span:12,defaultValue:[x().toISOString(),new Date().toISOString()]}]}var V=T({name:"UserTrackerStats",setup(){const e=b(),{userTrackers:t,userTrackerActions:a}=u();return E(async()=>{try{await c()}catch(o){k(e,o)}}),w(()=>{p()}),{userTrackers:t,userTrackerActions:a}},render(){const{userTrackers:e,userTrackerActions:t}=this;return t.processing?r(y,null,null):(n.length===1&&t.items.length!==0&&t.items.forEach(a=>n.push({label:a,value:a})),r(h,{disableAutoFetch:!0,hidePagination:!0,filters:D(),title:"\u7528\u6237\u884C\u4E3A\u67E5\u8BE2",columns:v(),data:e,fetch:f},null))}});export{V as default};
